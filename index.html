<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>App State LCS Generator</title>
  <meta name="description" content="App State LCS Generator - v1.7" />
  
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
  
  <style>
    
    body * {text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);}
    
    .accent {font-weight: bold; font-style: italic;}
    
    /* Colors: 
       #1a1334    #26294a    #01545a    #017351    #03c383    #aad962    
       #fbbf45    #ef6a32    #ed0345    #a12a5e    #710162    #110141 */
    
    body .color_0 {background-color: #ed0345; color: #eee} /* red */
    body .color_0 .team_0 {font-weight: bold; font-style: italic;}
    
    body .color_1 {background-color: #fbbf45;} /* yellow */
    body .color_1 .team_1 {font-weight: bold; font-style: italic;}
    
    body .color_2 {background-color: #aad962;} /* beige */
    body .color_2 .team_2 {font-weight: bold; font-style: italic;}
    
    body .color_3 {background-color: #01545a; color: #eee;} /* turqoise */
    body .color_3 .team_3 {font-weight: bold; font-style: italic;}
    
    body .color_4 {background-color: #26294a; color: #eee;} /* dark blue */
    body .color_4 .team_4 {font-weight: bold; font-style: italic;}
    
    body .color_5 {background-color: #017351; color: #eee;} /* green */
    body .color_5 .team_5 {font-weight: bold; font-style: italic;}
    
    body .color_6 {background-color: #ed7282; color: #eee;} /* pink */
    body .color_6 .team_6 {font-weight: bold; font-style: italic;}
    
    body .color_7 {background-color: #710162; color: #eee;} /* purple */
    body .color_7 .team_7 {font-weight: bold; font-style: italic;}
    
    #bracket .match {text-align: center; -webkit-transition: all .1s ease-in-out; transition: all .1s ease-in-out;}
    #bracket .vs {display: block; margin: 3px auto; font-style: italic;}
    
    #highlighters {padding: 12px 50px 0; text-align: justify;}
    #highlighters a {display: inline-block;}
    #highlighters a.pure-button-active {font-weight: bold;}
    #highlighters:after {content: ''; width: 100%; display: inline-block;}
    
  </style>
</head>
<body>
  
  <table id='bracket' class='pure-table pure-table-bordered'>
    <thead>
      <tr>
        <td id='week-1'>Week 1</td>
        <td id='week-2'>Week 2</td>
        <td id='week-3'>Week 3</td>
        <td id='week-4'>Week 4</td>
        <td id='week-5'>Week 5</td>
        <td id='week-6'>Week 6</td>
        <td id='week-7'>Week 7</td>
        <td id='week-8'>Week 8</td>
        <td id='week-9'>Week 9</td>
      </tr>
    </thead>
    
    <tbody>
      <tr id="week-1" class='pure-table-odd'></tr>
      <tr id="week-2"></tr>
      <tr id="week-3" class='pure-table-odd'></tr>
      <tr id="week-4"></tr>
      <tr id="week-5" class='pure-table-odd'></tr>
      <tr id="week-6"></tr>
      <tr id="week-7" class='pure-table-odd'></tr>
      <tr id="week-8"></tr>
      <tr id="week-9" class='pure-table-odd'></tr>
    </tbody>
  </table>
  
  <div id="highlighters">
    <h3>Highlight Team: </h3>
    <a href='#' id='0' class='pure-button color_0'>Orbital War Brigade</a>
    <a href='#' id='1' class='pure-button color_1'>Mom Told Me to Pause</a>
    <a href='#' id='2' class='pure-button color_2'>Naming is Harder</a>
    <a href='#' id='3' class='pure-button color_3'>Tears Fully Stacked</a>
    <a href='#' id='4' class='pure-button color_4'>C.C and the Cereal Killers</a>
    <a href='#' id='5' class='pure-button color_5'>Poptarts and Koreans</a>
    <a href='#' id='6' class='pure-button color_6'>Mayonnaise Wagon</a>
    <a href='#' id='7' class='pure-button color_7'>The Donger Squad</a>
  </div>
  
<<script>
		
	var possibles = [], weeks = [], teams = ["Orbital War Brigade", "Mom Told Me to Pause", "Naming is Harder than Gaming", "Tears Fully Stacked", "Captain Crunch and the Cereal Killers", "Poptarts and Koreans", "Mayonnaise Wagon", "The Donger Squad"];

	weeks = JSON.parse('[[[6,0],[7,4],[0,6],[3,7],[5,0],[1,3],[4,1],[2,6]],[[5,3],[0,4],[3,4],[2,5],[4,2],[6,5],[3,2],[7,1]],[[0,2],[1,7],[2,1],[5,4],[7,0],[6,2],[4,7],[3,1]],[[6,1],[2,3],[4,0],[0,3],[7,5],[1,2],[7,6],[5,1]],[[0,7],[4,5],[3,5],[7,2],[5,6],[1,4],[6,3],[2,7]],[[3,0],[1,6],[5,7],[7,3],[4,3],[0,5],[6,7],[2,4]],[[5,2],[0,1],[6,4],[2,0],[4,6],[3,6],[1,0],[7,3]],[[3,0],[1,6],[1,5],[6,7],[0,5],[2,4],[5,7],[4,3]],[[4,0],[2,3],[5,1],[7,6],[0,3],[1,2],[6,1],[3,2]]]');

	/**
	 * Randomize array element order in-place.
	 * Using Fisher-Yates shuffle algorithm.
	 */
	function shuffle(array) {
	  var m = array.length, t, i;

	  // While there remain elements to shuffle…
	  while (m) {

	    // Pick a remaining element…
	    i = Math.floor(Math.random() * m--);

	    // And swap it with the current element.
	    t = array[m];
	    array[m] = array[i];
	    array[i] = t;
	  }

	  return array;
	}

	function counter(arr) {
	    var a = [], b = [], prev;

	    arr.sort();
	    for ( var i = 0; i < arr.length; i++ ) {
	        if ( arr[i] !== prev ) {
	            a.push(arr[i]);
	            b.push(1);
	        } else {
	            b[b.length-1]++;
	        }
	        prev = arr[i];
	    }

	    return [a, b];
	}

	if(weeks.length <= 0) {
	  
	  for(var i=0; i < 8; i++){ 
	    
	    possibles[i] = [];
	    
	    for(var k=0; k < 8; k++) {
	      
	      if (i !== k) {
	        var temp = [i,k];
	        possibles[i].push(temp);
	      }
	      
	    }
	    
	  }
	  
	  // console.log(possibles);
	  
	  var team_1 = possibles[0], team_2 = possibles[1], team_3 = possibles[2], team_4 = possibles[3], team_5 = possibles[4], team_6 = possibles[5], team_7 = possibles[6], team_8 = possibles[7];
	  
	  // console.log(team_1);
	  
	  shuffle(team_1);
	  shuffle(team_2);
	  shuffle(team_3);
	  shuffle(team_4);
	  shuffle(team_5);
	  shuffle(team_6);
	  shuffle(team_7);
	  shuffle(team_8);
	  
	  /** 
	  console.log(team_1); console.log(team_2); console.log(team_3); console.log(team_4); console.log(team_5); console.log(team_6); console.log(team_7); console.log(team_8); 
	  **/
	  
	  for (var i=0; i < 7; i++) {
	   
	    weeks[i] = [];
	    weeks[i].push(team_1.shift());
	    weeks[i].push(team_2.shift());
	    weeks[i].push(team_3.shift());
	    weeks[i].push(team_4.shift());
	    weeks[i].push(team_5.shift());
	    weeks[i].push(team_6.shift());
	    weeks[i].push(team_7.shift());
	    weeks[i].push(team_8.shift());
	    
	    shuffle(weeks[i]);
	    
	  }
	  
	  shuffle(weeks[3]);
	  shuffle(weeks[5]);
	  weeks[7] = shuffle(weeks[5].slice(0));
	  weeks[8] = shuffle(weeks[3].slice(0));
	  
	}

	/* 
	var temp = weeks.slice(0), count = [];
	for (var i=0; i < 9; i++) {
	  var temp_2 = temp[i].join();
	  count[i] = counter(temp_2.split(','));
	  console.log(count[i][1]);
	}
	*/
	  
	// console.log(count);

	// console.log(weeks);
	var save_tmp = JSON.stringify(weeks);
	console.log(save_tmp);

	function build_schedule(weeks){
	  $('tbody td').remove();
	  
	  for(var i=0; i < weeks.length; i++) {
	    
	    for(var k=0; k < weeks[i].length; k++) {
	    
	      $('tr#week-'+(k+1)).append('<td class="match"><span id="'+weeks[i][k][0]+'" class="team team_'+weeks[i][k][0]+'">'+teams[weeks[i][k][0]]+'</span> <span class="vs">vs</span> <span id="'+weeks[i][k][1]+'" class="team team_'+weeks[i][k][1]+'">'+teams[weeks[i][k][1]]+'</td>');
	    
	    }
	  
	  }
	}

	build_schedule(weeks);

	var is_highlighted = false;

	function highlight(id) {
	  $('#bracket').find('span#' + id).each(function(){ $(this).parent().addClass('color_' + $(this).attr('id'));});
	}

	function unhighlight(id) {
	  $('#bracket').find('span#' + id).each(function(){ $(this).parent().removeClass('color_' + $(this).attr('id'));});
	}

	$('.team').hover(
	  function() {
	    if( !is_highlighted ) highlight($(this).attr('id'));
	  }, 
	  function() {
	    if( !is_highlighted ) unhighlight($(this).attr('id'));
	  }
	);

	$('#highlighters a').click(function(event){
	  event.preventDefault();
	  
	  if( is_highlighted === false ) {
	    highlight($(this).attr('id'));
	    $(this).addClass('pure-button-active');
	    is_highlighted = $(this).attr('id');
	  }
	  
	  else if ( is_highlighted === $(this).attr('id') ) {
	    unhighlight(is_highlighted); 
	    $(this).removeClass('pure-button-active');
	    is_highlighted = false;
	  }
	  
	  else {
	    unhighlight(is_highlighted); 
	    $('#highlighters .pure-button-active').removeClass('pure-button-active'); 
	    highlight($(this).attr('id'));
	    $(this).addClass('pure-button-active');
	    is_highlighted = $(this).attr('id');
	  }
	});

</script>

</body>
</html>